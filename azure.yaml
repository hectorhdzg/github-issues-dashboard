# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: github-issues-dashboard
metadata:
  template: github-issues-dashboard@0.0.1-beta
infra:
  provider: bicep
services:
  dashboard-app:
    project: ./
    host: appservice
    language: python
    hooks:
      predeploy:
        windows:
          shell: pwsh
          run: |
            python -m pip install --upgrade pip
            python -m pip install -r requirements.txt -t .python_packages/lib/site-packages
    env:
      DATABASE_PATH: /home/site/data/github_issues.db
      FLASK_HOST: 0.0.0.0
      FLASK_DEBUG: false
