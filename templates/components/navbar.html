<!-- Bootstrap Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top navbar-custom">
    <div class="container">
        <a class="navbar-brand" href="#" onclick="clearRepoSelection()">
            <i class="fas fa-bug"></i> Azure Monitor TelReach GitHub
        </a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto">
                <!-- Node.js Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="nodejsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fab fa-node-js language-icon"></i>Node.js
                        <span class="badge badge-count" id="navbar-nodejs-count">{{ nodejs_count }}</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="nodejsDropdown" id="nodejs-dropdown-menu">
                        {{ nodejs_nav_links|safe }}
                    </div>
                </li>
                
                <!-- Python Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="pythonDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fab fa-python language-icon"></i>Python
                        <span class="badge badge-count" id="navbar-python-count">{{ python_count }}</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="pythonDropdown" id="python-dropdown-menu">
                        {{ python_nav_links|safe }}
                    </div>
                </li>
                
                <!-- Browser JS Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="browserDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fab fa-js-square language-icon"></i>Browser JS
                        <span class="badge badge-count" id="navbar-browser-count">{{ browser_count }}</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="browserDropdown" id="browser-dropdown-menu">
                        {{ browser_nav_links|safe }}
                    </div>
                </li>
                
                <!-- .NET Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dotnetDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fab fa-microsoft language-icon"></i>.NET
                        <span class="badge badge-count" id="navbar-dotnet-count">{{ dotnet_count }}</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dotnetDropdown" id="dotnet-dropdown-menu">
                        {{ dotnet_nav_links|safe }}
                    </div>
                </li>
                
                <!-- Java Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="javaDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fab fa-java language-icon"></i>Java
                        <span class="badge badge-count" id="navbar-java-count">{{ java_count }}</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="javaDropdown" id="java-dropdown-menu">
                        {{ java_nav_links|safe }}
                    </div>
                </li>
            </ul>
            
            <!-- Right side buttons -->
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/sync" title="Sync Management">
                        <i class="fas fa-sync"></i> Sync Data
                    </a>
                </li>
                
                <!-- State Toggle -->
                <li class="nav-item">
                    <div class="toggle-switch nav-link p-0">
                        <input type="checkbox" id="state-toggle" class="toggle-input" 
                               {{ 'checked' if current_state == 'closed' else '' }} 
                               onchange="toggleIssueState()">
                        <label for="state-toggle" class="toggle-label">
                            <div class="toggle-text">
                                <span class="toggle-open">OPEN</span>
                                <span class="toggle-closed">CLOSED</span>
                            </div>
                            <div class="toggle-slider"></div>
                        </label>
                    </div>
                </li>
            </ul>
            
            <!-- Last updated info -->
            {% if last_updated %}
            <span class="navbar-text">
                <i class="fas fa-clock"></i> Updated: {{ last_updated }}
            </span>
            {% endif %}
        </div>
    </div>
</nav>
